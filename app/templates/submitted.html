<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Answers submitted!</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
</head>
<body>
	<div id="navbar">
      {% include 'navbar.html' %}
    </div>

    <div id="resultsBody">


    	<div></div>

	    <div id="results">
		    <h2>{{congrats}}!</h2>
		    <h3>{{score}} out of {{maxscore}}</h3>
		    <div class="twoColumn">
			    {% for item in results %}
			    	Problem {{ loop.index }}
			    	{% if item == "0" %}
			    		✗
			    	{% else %}
			    		✓
			    	{% endif %}
			    	<br>
			    {% endfor %}
			</div>
			<a href="test/{{testID}}">Try it again?</a>
		</div>

		<div id="shareResults">
			<h2>Share your results!</h2>
			<div id="sampleShare">
				{% include 'share.html' %}
			</div>

			<textarea id="codeSample">{{username}} got a score of {{score}} out of {{maxscore}} on {{testname}}!</textarea>
			<div id="buttonBar">
				<!-- First button: copy HTML to clipboard -->
				<button class="barButton" id="copyButton" onclick="copyText()">
					<svg viewBox="0 0 320 320" width="20">
					  <g transform="translate(0,35)">
					    <rect
					       width="160"
					       height="160"
					       x="100"
					       y="90"
					       style="fill:#ffffff;stroke:#000000;stroke-width:32" />
					    <rect
					       width="160"
					       height="160"
					       x="50"
					       y="20"
					       style="fill:#ffffff;stroke:#000000;stroke-width:32" />
					  </g>
					</svg>
				</button>
				<!-- Second button: facebook share -->
				<button class="barButton" id="faceButton" onclick="facebookShare()">
					<svg viewBox="0 0 40 40" width="20">
					  <path fill="black" d="M16.7 39.8C7.2 38.1 0 29.9 0 20 0 9 9 0 20 0s20 9 20 20c0 9.9-7.2 18.1-16.7 19.8l-1.1-.9h-4.4l-1.1.9z"/>
					  <path fill="#fff" d="m27.8 25.6.9-5.6h-5.3v-3.9c0-1.6.6-2.8 3-2.8H29V8.2c-1.4-.2-3-.4-4.4-.4-4.6 0-7.8 2.8-7.8 7.8V20h-5v5.6h5v14.1c1.1.2 2.2.3 3.3.3 1.1 0 2.2-.1 3.3-.3V25.6h4.4z"/>
					</svg>
				</button>
				<!-- End buttons -->
			</div>
		</div>



	</div>


	<!-- this handles copy-to-clipboard functions -->
	<script type="text/javascript"> 
		function copyText(){
	  		var copyText = document.getElementById("codeSample");
	  		copyText.select();
	  		copyText.setSelectionRange(0, 99999); // For mobile devices
	  		navigator.clipboard.writeText(copyText.value);
  		}
	</script>

	<!-- this handles facebook sharing -->
	<script type="text/javascript"> 
		sitelink = "https://www.facebook.com/sharer/sharer.php?u={{url_for('main.trophy',score=score,maxscore=maxscore,username=username,testID=testID,testname=testname)| safe}}"
		console.log(sitelink)
		function facebookShare(){
	  		window.open(
	  			sitelink,
	  			'pagename',
	  			'resizable,height=400,width=300'
	  		); 
	  		return false;
  		}
	</script>


</body>
</html>