<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Answers submitted!</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
</head>
<body>
	<div id="navbar">
      {% include 'navbar.html' %}
    </div>

    <div id="resultsBody">


    	<div></div>

	    <div id="results">
		    <h2>{{congrats}}!</h2>
		    <h3>{{score}} out of {{maxscore}}</h3>
		    <div class="twoColumn">
			    {% for item in results %}
			    	Problem {{ loop.index }}
			    	{% if item == "0" %}
			    		✗
			    	{% else %}
			    		✓
			    	{% endif %}
			    	<br>
			    {% endfor %}
			</div>
			<a href="test/{{testID}}">Try it again?</a>
		</div>

		<div id="shareResults">
			<h2>Share your results!</h2>
			<div id="sampleShare">
				{% include 'share.html' %}
			</div>

			<textarea id="codeSample">{% include 'share.html' %}</textarea>
			<div id="buttonBar">
				<!-- First button: copy HTML to clipboard -->
				<button class="barButton" id="copyButton" onclick="copyText()">
					<svg viewBox="0 0 320 320" width="20">
					  <g transform="translate(0,35)">
					    <rect
					       width="160"
					       height="160"
					       x="100"
					       y="90"
					       style="fill:#ffffff;stroke:#000000;stroke-width:32" />
					    <rect
					       width="160"
					       height="160"
					       x="50"
					       y="20"
					       style="fill:#ffffff;stroke:#000000;stroke-width:32" />
					  </g>
					</svg>
				</button>
				<!-- Second button: facebook share -->
				<button class="barButton" id="faceButton" onclick="facebookShare()">
					<svg viewBox="0 0 40 40" width="20">
					  <path fill="black" d="M16.7 39.8C7.2 38.1 0 29.9 0 20 0 9 9 0 20 0s20 9 20 20c0 9.9-7.2 18.1-16.7 19.8l-1.1-.9h-4.4l-1.1.9z"/>
					  <path fill="#fff" d="m27.8 25.6.9-5.6h-5.3v-3.9c0-1.6.6-2.8 3-2.8H29V8.2c-1.4-.2-3-.4-4.4-.4-4.6 0-7.8 2.8-7.8 7.8V20h-5v5.6h5v14.1c1.1.2 2.2.3 3.3.3 1.1 0 2.2-.1 3.3-.3V25.6h4.4z"/>
					</svg>
				</button>
				<!-- Third button: twitter share -->
				<button class="barButton" id="twitterButton" onclick="twitterShare()">
					<svg viewBox="0 0 248 204" width="20"> 
  					<path fill="black" d="M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z"/>
  					</g>
					</svg>
				</button>
				<!-- End buttons -->
			</div>
		</div>



	</div>


	<!-- this handles copy-to-clipboard functions -->
	<script type="text/javascript"> 
		function copyText(){
	  		var copyText = document.getElementById("codeSample");
	  		copyText.select();
	  		copyText.setSelectionRange(0, 99999); // For mobile devices
	  		navigator.clipboard.writeText(copyText.value);
  		}
	</script>

	<!-- this handles facebook sharing -->
	<script type="text/javascript"> 
		sitelink = "https://www.facebook.com/sharer/sharer.php?u={{url_for('main.trophy',score=score,maxscore=maxscore,username=username,testID=testID,testname=testname)| safe}}"
		function facebookShare(){
	  		window.open(
	  			sitelink,
	  			'pagename',
	  			'resizable,height=400,width=300'
	  		); 
	  		return false;
  		}
	</script>

	<!-- this handles twitter sharing -->
	<script type="text/javascript"> 
		sharelink=encodeURIComponent("{{url_for('main.trophy',score=score,maxscore=maxscore,username=username,testID=testID,testname=testname)| safe}}")
		console.log(sharelink)
		sitelink = "https://twitter.com/intent/tweet?url="+sharelink
		console.log(sitelink)
		function twitterShare(){
	  		window.open(
	  			sitelink,
	  			'pagename',
	  			'resizable,height=400,width=300'
	  		); 
	  		return false;
  		}
	</script>


</body>
</html>